<div class="card p-4 shadow-sm">
  <div *ngIf="successMessage" class="alert alert-success mt-2">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger mt-2">
    {{ errorMessage }}
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row mb-3">
      <div class="col-md-6">
        <label>Hasta</label>
        <select class="form-select" formControlName="patientId" [disabled]="viewMode">
          <option value="">Seçiniz</option>
          <option *ngFor="let p of patients" [value]="p.id">{{ p.firstName }} {{ p.lastName }}</option>
        </select>
      </div>
      <div class="col-md-6">
        <label>Doktor</label>
        <select class="form-select" formControlName="doctorId" [disabled]="viewMode">
          <option value="">Seçiniz</option>
          <option *ngFor="let d of doctors" [value]="d.id">{{ d.firstName }} {{ d.lastName }} - {{ d.specialty }}</option>
        </select>
      </div>
    </div>

    <div class="mb-3">
      <label>Tanı (Diagnosis)</label>
      <input type="text" class="form-control" formControlName="diagnosis" placeholder="Tanı giriniz" [readonly]="viewMode">
    </div>

    <div class="mb-3">
      <label>Reçete (Prescription)</label>
      <input type="text" class="form-control" formControlName="prescription" placeholder="İlaç veya tedavi" [readonly]="viewMode">
    </div>

    <div class="mb-3">
      <label>Notlar</label>
      <textarea rows="3" class="form-control" formControlName="notes" placeholder="Ek notlar..." [readonly]="viewMode"></textarea>
    </div>

    <button *ngIf="!viewMode" type="submit" class="btn btn-primary w-100">
      {{ record ? 'Kaydı Güncelle' : 'Yeni Kayıt Ekle' }}
    </button>
  </form>
</div>
